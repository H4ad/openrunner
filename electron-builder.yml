appId: com.openrunner.app
productName: OpenRunner
directories:
  output: dist
  buildResources: build

# Files to include in the app
files:
  - out/**/*

# Unpack these from asar for native module and CLI access
asarUnpack:
  - node_modules/better-sqlite3/**
  - node_modules/node-pty/**
  - out/main/cli.js
  - out/main/chunks/**

# GitHub Releases for auto-updates
publish:
  provider: github
  owner: h4ad
  repo: openrunner
  releaseType: release

# macOS configuration
mac:
  target:
    - dmg
    - zip
  category: public.app-category.developer-tools
  artifactName: "${productName}-${version}-${arch}.${ext}"

# Windows configuration
win:
  target:
    - nsis
  artifactName: "${productName}-${version}-${arch}.${ext}"

nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true

# Linux configuration
linux:
  target:
    - AppImage
    - deb
  category: Development
  artifactName: "${productName}-${version}-${arch}.${ext}"
  icon: build/icon.png
  # Desktop file name and executable must match app.name for taskbar icon association on GNOME/KDE
  executableName: openrunner
  # Override the generated desktop file settings for proper WM_CLASS matching
  desktop:
    entry:
      StartupWMClass: openrunner
      Icon: openrunner

# Include build resources in the packaged app
extraResources:
  - from: build/icon.png
    to: build/icon.png
